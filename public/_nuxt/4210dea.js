(window.webpackJsonp=window.webpackJsonp||[]).push([[11,7],{372:function(t,e,r){"use strict";var n=r(4),o=r(373).start;n({target:"String",proto:!0,forced:r(374)},{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},373:function(t,e,r){var n=r(36),o=r(28),c=r(182),m=r(44),h=Math.ceil,d=function(t){return function(e,r,d){var l,S,y=o(m(e)),k=y.length,T=void 0===d?" ":o(d),D=n(r);return D<=k||""==T?y:(l=D-k,(S=c.call(T,h(l/T.length))).length>l&&(S=S.slice(0,l)),t?y+S:S+y)}};t.exports={start:d(!1),end:d(!0)}},374:function(t,e,r){var n=r(73);t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(n)},475:function(t,e,r){"use strict";r.r(e);r(29),r(145),r(39),r(23),r(62),r(7),r(8),r(372);var n=r(0),o=r(108),c=r(409);n.a.use(o.a),e.default={data:function(){return{mydate:(new Date).toISOString().substr(0,10),secondsValue:0,secondsValueStart:0,message:"CoM_Method",Nishio:!0,NishioHP:!0,Fukushima:!1,TimeIncrease:[0,0],machinesRensou:{},excludeSetTime:[]}},components:{compMachineHP:c.default},mounted:function(){var t=new Date(Date.now()+60*((new Date).getTimezoneOffset()+540)*1e3);this.mydate="".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate()),this.FireStoreGet(),this.excludeSet(),this.fillData()},computed:{getTest:function(){},getStatusData:function(){return this.$store.getters["timeBank/getStatus"](this.nameAB)},getProgressSeconds:function(){return this.$store.getters["timeBank/getProgressSeconds"]},getNow:function(){new Date;return this.$store.getters.getNow},getGenzaiJikan:function(){return this.$store.getters["timeBank/getKeikaJikanByou"]},getCA:function(){return this.$store.getters["timeBank/getCycleArray2"]},getCA2:function(){return this.$store.getters["timeBank/getCycleArray"]},reverseItems:function(){return this.data_Teishi_Title.slice().reverse().splice(0,7)},RDS:function(){return this.data_sample},GetD:function(){return this.$store.getters["counter/counter"]},getKadouJikanVuex:function(){return this.$store.getters.getKadouJikan},getKeikaJikan:function(){return this.$store.getters["timeBank/getKeikaJikan"]},getmachineHourCut:function(){return this.$store.getters["timeBank/getmachineHourCutArry"]},Kadouritst:function(){return"【マシン稼働率".concat(Math.round(this.$store.getters.getKadouJikan/this.$store.getters["timeBank/getKeikaJikanByou"]*1e3)/10,"％】")}},methods:{cycleTimeArrayUD:function(){this.$store.commit("timeBank/cycleTimeArrayUD",{machineCode:"LN034",timeDeff:345})},cyclesArrayUD:function(){this.$store.commit("timeBank/cyclesArrayUD","LN034")},statusArryUD:function(){this.$store.commit("timeBank/statusArryUD","LN034")},cycleCounterUD:function(){this.$store.commit("timeBank/cycleCounterUD","MC027")},fillData:function(){this.fire()},getRandomInt:function(){return Math.floor(46*Math.random())+5},fireStoreAdd:function(t,e,r,n){this.$fire.firestore.collection("SeisanNippou").add({Date:t,Machine:e,Time:r,tantou:n}).then((function(t){console.log("Document written with ID: ",t.id)})).catch((function(t){console.error("Error adding document: ",t)}))},fire:function(){var t=this,e=new Date(this.mydate),r=e.getFullYear(),n=e.getMonth(),o=e.getDate(),c=new Date(r,n,o,7,0,0),m=new Date(r,n,o,23,59,59),h=String(Date.parse(c)),d=String(Date.parse(m));this.$fire.database.ref("CurrentTarget/").on("value",(function(e){var r=e.val();for(var i in r){var n=r[i],o=n.zuban1+n.hinmei+"  "+String(n.kijunsu)+"ｹ";t.$store.commit("timeBank/CurrentTargetUD",{TgtMachine:n.machine,TgtValue:o})}})),this.$fire.database.ref("NishioMachineCT/").orderByChild("endTime").startAt(h).endAt(d).on("value",(function(e){t.initData();var data=e.val();for(var i in data){var r=data[i],n=new Date(Number(r.endTime)),o=new Date(Number(r.startTime));o<new Date(2020,12,31)&&(o=n);var c=String(n.getFullYear()),m=String(n.getMonth()+1),h=String(n.getDate()),d=String(n.getHours()),l=String(n.getMinutes()),S=String(n.getSeconds()),y="".concat(t.zeroPadding(d,2),": \n                                        ").concat(t.zeroPadding(l,2),": \n                                        ").concat(t.zeroPadding(S,2)," "),k=String(o.getFullYear()),T=String(o.getMonth()+1),D=String(o.getDate()),f=String(o.getHours()),B=String(o.getMinutes()),$=String(o.getSeconds()),A=("(Start=)".concat(k,"年").concat(T,"月").concat(D,"日").concat(f,"時").concat(B,"分").concat($,"秒"),(Number(r.endTime)-Number(r.startTime))/1e3);A>3e4&&(A=0);new Date(n-o);var C=r.machine;t.TimeIncrease[Number(r.Status)-1]+=A,t.DoSwitch(r.status,C,A,f,d,o,n,y),t.$store.commit("timeBank/sensingTimeArryUD",{machineCode:C,sensingStartTime:o,sensingEndTime:n,JustSensingTime:Date.now()}),t.$store.commit("timeBank/sensingTimeStArryUD",{machineCode:C,sensingTime:y});var U=c+m+h+"  "+d+"時"+l+"分"+S+"秒",M=r.status;t.lastS=M,t.lastD=U}t.timeBegan=new Date,t.started=setInterval(t.keikaJikan,1e3)}))},FireStoreGet:function(){var t=this;this.machines=[];this.$fire.firestore.collection("machines").get().then((function(e){e.forEach((function(e){t.machinesRensou[e.id]=[e.data()],t.machines.push(Object.assign({machine:e.id},e.data()));var r=60*Number(e.data().CTm)+Number(e.data().CTs);t.$store.commit("timeBank/CycleTimeByouArrySet",{TgtMachine:e.id,CycleTimeByou:r})}))}))},initData:function(){for(var t=this,e=0,r=Object.keys(this.$store.getters["timeBank/getStatusFull"]);e<r.length;e++){var n=r[e];this.$store.commit("timeBank/cycleTimeArrayUD",n),this.$store.commit("timeBank/cycleCounterRst",n),this.$store.commit("timeBank/cycleCounterErrRst",n),this.$store.commit("timeBank/cycleCounterDDRRst",n),this.$store.commit("timeBank/cycleTimeArrayRst",n),this.$store.commit("timeBank/cycleTimeArrayErrRst",n),this.$store.commit("timeBank/cycleTimeArrayDDRRst",n),this.$store.commit("timeBank/cycleTimeArrayKKTRst",n),this.$store.commit("timeBank/cycleTimeArrayMaijiRst",n)}this.standArry=this.$store.getters["timeBank/getStatusFull"],Object.keys(this.standArry).forEach((function(e){return t.$store.commit("timeBank/StopWatchSinceStartRST",{machineCode:e,machineHour:0})})),Object.keys(this.standArry).forEach((function(e){return t.$store.commit("timeBank/machineHourCutArryUD",{machineCode:e,machineHour:0})})),Object.keys(this.standArry).forEach((function(e){return t.$store.commit("timeBank/cycleCounterUD",{machineCode:e,first:!0})})),Object.keys(this.standArry).forEach((function(e){return t.$store.commit("timeBank/cycleCounterErrUD",{machineCode:e,first:!0})})),Object.keys(this.standArry).forEach((function(e){return t.$store.commit("timeBank/cycleCounterDDRUD",{machineCode:e,first:!0})})),Object.keys(this.standArry).forEach((function(e){return t.$store.commit("timeBank/cycleTimeArrayRst",{machineCode:e})})),Object.keys(this.standArry).forEach((function(e){return t.$store.commit("timeBank/cycleTimeArrayErrRst",{machineCode:e})})),Object.keys(this.standArry).forEach((function(e){return t.$store.commit("timeBank/cycleTimeArrayDDRRst",{machineCode:e})})),Object.keys(this.standArry).forEach((function(e){return t.$store.commit("timeBank/cycleTimeArrayKKTRst",{machineCode:e})})),this.lastD=0,this.count=0,this.dataCount=0},DoSwitch:function(t,e,r,n,o,c,m,h){switch(t){case"RUN1":r>2&&(this.dataCount++,this.$store.commit("timeBank/statusArryUD",{machineCode:e,statusBool:1}),this.$store.commit("timeBank/cycleCounterUD",{machineCode:e,first:!1}),this.$store.commit("timeBank/machineHourArryUD",{current_state:1,machineCode:e,machineHour:r}),this.MaijiArrayVuexSet(n,o,c,m,e,r,4,"timeBank/cycleTimeArrayMaijiUD"));break;case"RUN2":1==this.$store.getters["timeBank/getStatus"](e)&&(this.$store.commit("timeBank/statusArryUD",{machineCode:e,statusBool:0}),this.$store.commit("timeBank/cycleTimeArrayUD",{machineCode:e,timeDeff:r,UD:!0}),this.MaijiArrayVuexSet(n,o,c,m,e,r,0,"timeBank/cycleTimeArrayMaijiUD"),this.$store.commit("timeBank/machineHourArryUD",{current_state:0,machineCode:e,machineHour:r}),this.$store.commit("timeBank/machineHourCutArryUD",{machineCode:e,machineHour:r}),this.$store.commit("timeBank/sensingTimeArryUD",{machineCode:e,sensingStartTime:c,sensingTime:m}),this.$store.commit("timeBank/sensingTimeStArryUD",{machineCode:e,sensingTime:h}));break;case"DDR1":r>2&&(this.$store.commit("timeBank/statusArryUD",{machineCode:e,statusBool:3}),this.$store.commit("timeBank/cycleCounterDDRUD",{machineCode:e,first:!1}),this.MaijiArrayVuexSet(n,o,c,m,e,r,4,"timeBank/cycleTimeArrayMaijiUD"));break;case"DDR2":3==this.$store.getters["timeBank/getStatus"](e)&&(this.$store.commit("timeBank/statusArryUD",{machineCode:e,statusBool:0}),this.$store.commit("timeBank/cycleTimeArrayDDRUD",{machineCode:e,timeDeff:r}),"GT999"==e&&console.log("チェック中"+e+"は、"+r),this.MaijiArrayVuexSet(n,o,c,m,e,r,1,"timeBank/cycleTimeArrayMaijiUD"),this.$store.commit("timeBank/machineHourArryUD",{current_state:2,machineCode:e,machineHour:r}));break;case"KKT1":r>2&&(this.$store.commit("timeBank/statusArryUD",{machineCode:e,statusBool:4}),this.MaijiArrayVuexSet(n,o,c,m,e,r,4,"timeBank/cycleTimeArrayMaijiUD"));break;case"KKT2":4==this.$store.getters["timeBank/getStatus"](e)&&(this.$store.commit("timeBank/statusArryUD",{machineCode:e,statusBool:0}),this.$store.commit("timeBank/cycleTimeArrayKKTUD",{machineCode:e,timeDeff:r}),this.MaijiArrayVuexSet(n,o,c,m,e,r,3,"timeBank/cycleTimeArrayMaijiUD"));break;case"ERR1":this.$store.commit("timeBank/statusArryUD",{machineCode:e,statusBool:2}),this.$store.commit("timeBank/cycleCounterErrUD",{machineCode:e,first:!1}),this.MaijiArrayVuexSet(n,o,c,m,e,r,4,"timeBank/cycleTimeArrayMaijiUD");break;case"ERR2":2==this.$store.getters["timeBank/getStatus"](e)&&(this.$store.commit("timeBank/statusArryUD",{machineCode:e,statusBool:0}),this.$store.commit("timeBank/cycleTimeArrayErrUD",{machineCode:e,timeDeff:r}),this.MaijiArrayVuexSet(n,o,c,m,e,r,2,"timeBank/cycleTimeArrayMaijiUD"));break;default:console.log("switch,一致しない")}},MaijiArrayVuexSet:function(t,e,r,n,o,c,m,h){var d=[0,0,0,0,0,0,0,0,0,0,0],l=60*r.getMinutes()+r.getSeconds();if(t==e)d[Number(t)-7]=c,this.$store.commit("timeBank/GuntArryPush",{GuntStart:l,GuntHorizon:c,y:15*(t-4),NowState:m,machine:o});else{var S=new Date(n);S.setHours(Number(t)+1),S.setMinutes(0),S.setSeconds(0);var y=new Date(S-r),k=60*y.getMinutes()+y.getSeconds();d[t-8]=k;var T=Number(e)-Number(t);this.$store.commit("timeBank/GuntArryPush",{GuntStart:l,GuntHorizon:k,y:15*(t-4),NowState:m,machine:o});for(var i=1;i<T;i++)d[i+(Number(t)-8)]=3600,this.$store.commit("timeBank/GuntArryPush",{GuntStart:0,GuntHorizon:3600,y:15*(i+Number(t-4)),NowState:m,machine:o});S.setHours(Number(e));var D=new Date(n-S),f=60*D.getUTCMinutes(),B=D.getUTCSeconds(),$=f+B;d[Number(t)-8+T]=f+B,this.$store.commit("timeBank/GuntArryPush",{GuntStart:0,GuntHorizon:$,y:15*(e-4),NowState:m,machine:o})}this.$store.commit(h,{machineCode:o,start:t,end:e,elapsed:d,timeDeff:c,nowTgt:m})},excludeSet:function(){for(var i=0;i<14;i++)this.excludeSetTime[i]=new Date;this.excludeSetTime[0].setHours(8,0,0),this.excludeSetTime[1].setHours(9,0,0),this.excludeSetTime[2].setHours(10,0,0),this.excludeSetTime[3].setHours(10,10,0),this.excludeSetTime[4].setHours(11,0,0),this.excludeSetTime[5].setHours(12,0,0),this.excludeSetTime[6].setHours(12,50,0),this.excludeSetTime[7].setHours(14,0,0),this.excludeSetTime[8].setHours(15,0,0),this.excludeSetTime[9].setHours(15,10,0),this.excludeSetTime[10].setHours(16,0,0),this.excludeSetTime[11].setHours(17,0,0),this.excludeSetTime[12].setHours(18,0,0),this.excludeSetTime[13].setHours(19,0,0)},keikaJikan:function(){var t=new Date,e=new Date;switch(e.setHours(8,0,0),!0){case t<this.excludeSetTime[2]:this.excludedTime=[0,0,0];break;case t<this.excludeSetTime[3]:this.excludedTime=[new Date(t-this.excludeSetTime[2]).getMinutes(),0,0];break;case t<this.excludeSetTime[5]:this.excludedTime=[10,0,0];break;case t<this.excludeSetTime[6]:this.excludedTime=[10,new Date(t-this.excludeSetTime[3]).getMinutes(),0];break;case t<this.excludeSetTime[8]:this.excludedTime=[10,50,0];break;case t<this.excludeSetTime[9]:this.excludedTime=[10,50,new Date(t-this.excludeSetTime[5]).getMinutes()];break;case t<this.excludeSetTime[13]:case t>this.excludeSetTime[13]:this.excludedTime=[10,50,10]}var r=this.excludedTime[0]+this.excludedTime[1]+this.excludedTime[2],n=new Date(t-e);n.setMinutes(n.getMinutes()-r),this.$store.commit("timeBank/TB_Kadoujikan",n);var o=n.getUTCHours(),c=n.getUTCMinutes(),m=n.getUTCSeconds(),h=3600*o+60*c+m;this.$store.commit("timeBank/ProgressSecondsUD",h);this.KadouJikan="".concat(o,":").concat(String(c).padStart(2,"0"),":").concat(String(m).padStart(2,"0"));this.GenzaiJikan="".concat(String(t.getMonth()+1),"月\n      ").concat(String(t.getDate()),"日（\n      ").concat(String(["日","月","火","水","木","金","土"][t.getDay()]),"）\n      ").concat(String(t.getHours()).padStart(2,"0"),":\n       ").concat(String(t.getMinutes()).padStart(2,"0"),":\n       ").concat(String(t.getSeconds()).padStart(2,"0")),this.$store.commit("timeBank/genzaiJikanUD",this.GenzaiJikan);for(var d=0,l=Object.keys(this.$store.getters["timeBank/getStopWatchArrayPrimitive"]);d<l.length;d++){var S=l[d],y=this.$store.getters["timeBank/getSensingTime"](S),k=this.$store.getters["timeBank/getSensingTimeStart"](S),T=new Date(Date.now()-y),D=new Date(Date.now()-k),h1=T.getUTCHours(),f=T.getUTCMinutes(),B=60*T.getUTCHours()+f,$=T.getUTCSeconds(),A=D.getUTCHours(),C=(D.getUTCMinutes(),60*D.getUTCHours()),U=D.getUTCSeconds(),h2=String(h1).padStart(2,"0"),M=String(f).padStart(2,"0"),x=String(B),w=String($).padStart(2,"0"),H=("".concat(h2,":").concat(M,":").concat(w),"".concat(x,"分").concat(w,"秒"));if(this.secondsValue=3600*h1+60*f+$,this.secondsValueStart=3600*A+C+U,this.$store.commit("timeBank/StopWatchArryUD",{machineCode:S,StopWatchTime:H,StopWatchSecondsTime:this.secondsValue,StopWatchSecondsTimeStart:this.secondsValueStart}),1==this.$store.getters["timeBank/getStatus"](S)){var v=this.$store.getters["timeBank/getmachineHourArryTgt"](S)[0],j=this.$store.getters["timeBank/getSensingTime"](S);if(v>0){var R=(new Date).getTime()-j.getTime(),N=R/6e4,E=(R%=6e4)/1e3,K=v-(60*Math.floor(N)+Math.floor(E));this.$store.commit("timeBank/machineHourCutArryUD",{machineCode:S,machineHour:K})}}}},JikanHenkan:function(t){var e=Math.floor(t/60),s="00"+String(t%60);return"".concat(e,"'").concat(s.slice(-2))},zeroPrefix:function(){for(var t="",i=0;i<digit;i++)t+="0";return(t+num).slice(-digit)},zeroPadding:function(t,e){return("00000000"+String(t)).slice(-e)}}}}}]);